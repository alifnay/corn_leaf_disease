<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disease Detector</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-[#FDFADB] to-white">
    <!-- Navbar -->
    <nav class="flex items-center border-b-2 border-gray-500 justify-between py-4 px-16">
        <div>
            <a href="/">
                <img src="static/images/logo.png" alt="" class="w-12 h-12">
            </a>
        </div>
        <div class="flex items-center space-x-12">
            <a href="/" class="text-[#003B06]">Home</a>
            <a href="#" class="text-[#003B06] font-bold">Deteksi Penyakit</a>
        </div>
    </nav>

    <!-- Form Upload -->
    <div class="max-w-5xl mx-auto bg-[#E6F1E8] rounded-2xl p-8 space-y-4 shadow-xl mb-20 mt-10">
        <form id="upload-form" action="/detection" method="POST" enctype="multipart/form-data" class="space-y-6">
            <div class="font-bold text-lg">Deteksi</div>
            <div class="font-light text-sm">Tambahkan foto di sini, maksimal 10MB</div>
            <div class="w-full h-80 bg-white rounded-lg border-2 border-dashed border-[#FFCB39] flex flex-col items-center justify-center space-y-4">
                <img src="static/images/folder.png" alt="Folder Icon" class="w-16 h-16">
                <span class="text-[#FFCB39] font-medium">Drag & drop file here or click to upload</span>
                <!-- Tombol kustom untuk memilih file -->
                <label for="file-upload" class="bg-white text-[#FFCB39] border-2 border-[#FFCB39] font-medium px-4 py-2 rounded-lg hover:bg-[#FFCB39] hover:text-white cursor-pointer">
                Pilih File
                </label>
                <!-- Input file tersembunyi -->
                <input type="file" name="file" id="file-upload" class="hidden" />
            </div>
            <button type="submit" class="bg-[#FFCB39] text-white font-medium px-6 py-3 rounded-lg hover:bg-[#E6B832]">
                Deteksi
            </button>
        </form>

        <!-- Tampilkan Error -->
        {% if error %}
            <div class="text-red-500 mt-4">{{ error }}</div>
        {% endif %}

        <!-- Tampilkan pesan gambar berhasil di upload -->
        {% if file_uploaded %}
            <div class="text-green-500 mt-4">Gambar berhasil di upload</div>
        {% endif %}

        <!-- Tampilkan Hasil Deteksi -->
        {% if predicted_class %}
            <div class="mt-6">
                <div class="text-lg font-bold">Hasil Deteksi:</div>
                <div class="text-sm">Kelas: <strong>{{ predicted_class }}</strong></div>
                <div class="text-sm">Akurasi: <strong>{{ "%.2f"|format(predicted_probability) }}%</strong></div>
                <div class="mt-4 text-sm font-semibold">Probabilitas setiap kelas:</div>
                <ul class="list-disc list-inside">
                    {% for class_name, probability in probabilities.items() %}
                        <li>{{ class_name }}: {{ "%.2f"|format(probability) }}%</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>
</body>
</html>
